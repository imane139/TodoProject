@model List<Todo>
@using WebApplication5.Enums

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Liste des Todos</h2>
        <a asp-action="Add" class="btn btn-primary">+ Ajouter Todo</a>
    </div>

    <table class="table table-striped table-hover align-middle text-center">
        <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>Libellé</th>
                <th>Description</th>
                <th>Statut</th>
                <th>Date Limite</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var todo in Model)
                {
                    var rowClass = "";
                    if (todo.DateLimite < DateTime.Now)
                        rowClass += "text-danger"; 
                    if (todo.State == State.Done)
                        rowClass += "  text-decoration-line-through"; 

                    <tr class="@rowClass">
                        <td>@todo.Id</td>
                        <td>@todo.Libelle</td>
                        <td>@todo.Description</td>
                        <td>@todo.State</td>
                        <td>@todo.DateLimite.ToString("yyyy-MM-dd")</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@todo.Id" class="btn btn-warning btn-sm me-2">Modifier</a>
                            <form asp-action="Delete" asp-route-id="@todo.Id" method="post" class="d-inline"
                                  onsubmit="return confirm('Voulez-vous vraiment supprimer ce todo ?');">
                                <button class="btn btn-danger btn-sm">Supprimer</button>
                            </form>
                        </td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="6" class="text-muted">Aucun todo pour le moment.</td>
                </tr>
            }
        </tbody>
    </table>
</div>
